<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gerador de Certificado</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #f5f5f5; padding: 20px; }
  #canvas { border: 1px solid #ccc; cursor: move; margin-top: 20px; touch-action: none; }
  input, button { padding: 8px; font-size: 16px; margin-top: 10px; }
  button { cursor: pointer; }
</style>
</head>
<body>
<h1>Gerador de Certificado</h1>

<!-- Campo para digitar o indicativo -->
<input type="text" id="indicativo" placeholder="Digite seu indicativo">
<br><br>

<!-- Canvas para mostrar a imagem + texto -->
<canvas id="canvas" width="800" height="600"></canvas>
<br>

<!-- Botão para baixar -->
<button onclick="downloadCertificado()">Baixar Certificado</button>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const img = new Image();

img.src = 'certificado.jpg'; // imagem no mesmo repositório

// Posição inicial do texto (centralizado)
let textX = canvas.width / 2;
let textY = canvas.height / 2;
let dragging = false;

// Quando a imagem carregar, desenha no canvas
img.onload = () => {
    drawCanvas();
};

// Função para desenhar imagem + texto
function drawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

    ctx.font = 'bold 48px Arial';
    ctx.fillStyle = 'white';   // texto branco
    ctx.textAlign = 'center';
    ctx.shadowColor = 'black'; // sombra preta
    ctx.shadowBlur = 6;
    ctx.shadowOffsetX = 2;
    ctx.shadowOffsetY = 2;

    ctx.fillText(document.getElementById('indicativo').value.toUpperCase(), textX, textY);

    ctx.shadowColor = 'transparent'; // limpa sombra depois
}

// Atualiza o texto enquanto digita
document.getElementById('indicativo').addEventListener('input', drawCanvas);

// === SUPORTE PARA MOUSE ===
canvas.addEventListener('mousedown', e => { dragging = true; });
canvas.addEventListener('mouseup', e => dragging = false);
canvas.addEventListener('mouseleave', e => dragging = false);
canvas.addEventListener('mousemove', e => {
    if (dragging) {
        const rect = canvas.getBoundingClientRect();
        textX = e.clientX - rect.left;
        textY = e.clientY - rect.top;
        drawCanvas();
    }
});

// === SUPORTE PARA CELULAR (TOQUE) ===
canvas.addEventListener('touchstart', e => {
    dragging = true;
    e.preventDefault(); // evita scroll
});
canvas.addEventListener('touchend', e => dragging = false);
canvas.addEventListener('touchcancel', e => dragging = false);
canvas.addEventListener('touchmove', e => {
    if (dragging) {
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches[0]; // primeiro dedo
        textX = touch.clientX - rect.left;
        textY = touch.clientY - rect.top;
        drawCanvas();
        e.preventDefault(); // evita arrastar tela
    }
});

// Função para baixar certificado
function downloadCertificado() {
    const link = document.createElement('a');
    link.download = 'certificado.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
}
</script>
</body>
</html>